# Класс `Book`

## Описание

Класс `Book` представляет книгу в библиотечной системе. Он позволяет хранить и обрабатывать информацию о названии, авторе, доступности книги, а также о текущем заемщике.

---

## Атрибуты

- **`title`** (строка): Название книги.  
- **`author`** (строка): Автор книги.  
- **`available`** (логический): Статус доступности книги. Значение `True`, если книга доступна для выдачи, иначе `False`.  
- **`borrower`** (строка или `None`): Имя текущего заемщика, если книга выдана. Если книга доступна, значение `None`.  

---

## Методы

### `__init__(self, title, author)`
Инициализирует объект книги с указанными названием и автором.

#### Параметры:
- **`title`** (строка): Название книги.  
- **`author`** (строка): Автор книги.  

---

### `get_info(self)`
Возвращает информацию о книге в виде строки.

#### Возвращает:
- (строка): Название книги и имя автора.

---

### `change_status(self, status, borrower=None)`
Меняет статус доступности книги и записывает имя заемщика, если книга взята.

#### Параметры:
- **`status`** (логический): Новый статус доступности.  
- **`borrower`** (строка, необязательный): Имя заемщика, если книга становится недоступной.

#### Возвращает:
- (строка): Сообщение о том, что статус изменён.

---

### `_validate_data(self)`
**Protected метод**: Проверяет корректность данных книги.

#### Исключения:
- **`ValueError`**: Если название или автор книги не указаны.

---

# Класс `Member`

## Описание

Класс `Member` представляет пользователя библиотеки, который может заимствовать книги. Он хранит информацию о заимствованных книгах и предоставляет методы для их получения и возврата.

---

## Атрибуты

- **`name`** (строка): Имя пользователя библиотеки.  
- **`borrowed_books`** (список объектов `Book`): Список книг, которые заимствованы участником.

---

## Методы

### `__init__(self, name)`
Инициализирует объект пользователя с заданным именем.

#### Параметры:
- **`name`** (строка): Имя пользователя.

---

### `borrow_book(self, book)`
Добавляет книгу в список заимствованных книг пользователя, если она доступна.

#### Параметры:
- **`book`** (объект `Book`): Книга, которую участник хочет взять.

#### Возвращает:
- (строка): Сообщение о том, что книга была успешно взята, или сообщение о том, что книга недоступна.

---

### `return_book(self, book)`
Возвращает книгу, убирая ее из списка заимствованных книг.

#### Параметры:
- **`book`** (объект `Book`): Книга, которую участник хочет вернуть.

#### Возвращает:
- (строка): Сообщение о том, что книга была успешно возвращена, или сообщение о том, что эта книга не была заимствована данным участником.

---

### `_validate_data(self)`
**Protected метод**: Проверяет корректность данных пользователя.

#### Исключения:
- **`ValueError`**: Если имя пользователя не указано.

---

# Класс `Library`

## Описание

Класс `Library` представляет библиотеку, которая управляет книгами и пользователями. Он позволяет добавлять и удалять книги, регистрировать участников, а также сохранять и загружать информацию о библиотеке в/из JSON-файла.

---

## Атрибуты

- **`books`** (список): Список всех книг в библиотеке.  
- **`members`** (список): Список участников библиотеки.  

---

## Методы

### `__init__(self)`
Инициализирует объект библиотеки с пустыми списками для книг и участников.

---

### `add_book(self, book)`
Добавляет книгу в библиотеку.

#### Параметры:
- **`book`** (объект `Book`): Книга, которая будет добавлена в библиотеку.

#### Возвращает:
- (строка): Сообщение о добавлении книги в библиотеку.

---

### `remove_book(self, title)`
Удаляет книгу из библиотеки по названию. Книга становится недоступной и ее заемщик сбрасывается.

#### Параметры:
- **`title`** (строка): Название книги, которую нужно удалить.

#### Возвращает:
- (строка): Сообщение о том, что книга была удалена из библиотеки или что книга не найдена.

---

### `add_member(self, member)`
Добавляет пользователя в библиотеку.

#### Параметры:
- **`member`** (объект `Member`): Участник, который будет добавлен в библиотеку.

#### Возвращает:
- (строка): Сообщение о добавлении пользователя в библиотеку.

---

### `_find_book(self, title)`
**Protected метод**: Ищет книгу в библиотеке по названию.

#### Параметры:
- **`title`** (строка): Название книги, которую нужно найти.

#### Возвращает:
- (объект `Book` или `None`): Возвращает объект книги, если книга найдена, или `None`, если книга не найдена.
- 

### `_find_member(self, name)`
**Protected метод**: Ищет пользователя в библиотеке по имени.

#### Параметры:
- **`name`** (строка): Имя пользователя, которого нужно найти.

#### Возвращает:
- (объект `Member` или `None`): Возвращает объект пользователя, если участник найден, или `None`, если участник не найден.

---

### `save_to_file(self, filepath)`
Сохраняет информацию о книгах и пользователях в JSON-файл.

#### Параметры:
- **`filepath`** (строка): Путь к файлу, в который будет сохранена информация.

#### Возвращает:
- (строка): Сообщение о том, что информация успешно сохранена в файл.

---

### `load_from_file(self, filepath)`
Загружает информацию о книгах и пользователях из JSON-файла.

#### Параметры:
- **`filepath`** (строка): Путь к файлу, из которого будет загружена информация.

#### Возвращает:
- (строка): Сообщение о том, что информация успешно загружена из файла.

---

### `_levenshtein_distance(self, s1, s2)`
Подсчитывает расстояние Левенштейна для двух строк.

#### Параметры:
- **`s1`** (строка): Первая строка для сравнения.
- **`s2`** (строка): Вторая строка для сравнения.

#### Возвращает:
- (число): Расстояние Левенштейна для строк s1 и s2.

---

---

### `suggest_books(self, title)`
Находит книги, название которых похоже на title.

#### Параметры:
- **`title`** (строка): Название книги, по которому будут искаться похожие книги.

#### Возвращает:
- (список): Книги, название которых похоже на title(расстояние Левенштейна < 5).

---



# Блочные тесты

**Класс `TestBook`**
Для тестов этого класса используется объект класса `Book`.

| Название теста | Тип теста  | Входные данные                          | Ожидаемый результат                                       |
|---|------------|-----------------------------------------|-----------------------------------------------------------|
| `test_get_info` | Позитивный | Объект книги                            | Вывод информации о книге и авторе: "1984 by George Orwell" |
| `test_change_status` | Позитивный | Объект книги с полем "available" = True | Изменение статуса на `False`                                |
| `test_validate_data` | Негативный | Название: "", Автор: ""                 | `ValueError`                                              |

***Для следующих тестов (TestLibrary, TestIntegration, TestAttestation) используется объект класса `Library` для проведения операций над пользователями и книгами.***

**Класс `TestLibrary`**


| Название теста | Тип теста  | Входные данные                                                         | Ожидаемый результат                                      |
|--|------------|------------------------------------------------------------------------|----------------------------------------------------------|
| `test_add_book` | Позитивный | Название: "The Great Gatsby", Автор: F. Scott Fitzgerald               | Создан объект книги и добавлен в библиотеку              |
| `test_remove_book` | Позитивный | Объект книги "To Kill a Mockingbird" в библиотеке                      | Объект книги удален из библиотеки                        |
| `test_find_irrelevant_book` | Негативный | Название книги, которой нет в библиотеке: "Doom"                       | `None`                                                   |
| `test_save_to_file` | Позитивный | Название файла для сохранения: "test_library.json"                     | Данные библиотеки сохранены в файл "test_library.json"   |
| `test_load_from_file` | Позитивный | Сохраненные данные библиотеки в файле: "test_library.json"             | Данные библиотеки загружены из файла "test_library.json" |
| `test_levenstein_distance` | Позитивный | Строка1: "The Great Gatsby", Строка2: "Thee Greats atsby"              | 3                                                        |
| `test_suggest_books` | Позитивный | Книги в библиотеке: "Lucky man", "Lucky men"; Запрос поиска: "Lucky m" | 2 объекта Book в рекомендации                            |

**Класс `TestMember`**

Для тестов этого класса используются объекты класса `Member` и `Book`.

| Название теста | Тип теста  | Входные данные            | Ожидаемый результат                       |
|--|------------|---------------------------|-------------------------------------------|
| `test_borrow_book` | Позитивный | Объект книги, объект пользователя | В списке книг пользователя добавлена книга |
| `test_return_book` | Позитивный | Объект книги, объект пользователя | Книга удалена из списка книг пользователя |
| `test_return_not_borrowed_book` | Негативный |Объект книги, объект пользователя           | Уведомление о том, что человек не взял эту книгу |
| `test_validate_data` | Негативный |Объект пользователя с именем ""  | `ValueError`                              |

# Интеграционные тесты
**Класс `TestIntegration`**

Для тестов этого класса, в объект класса `Library` были помещены следующие объекты:

Класс `Book`:
* book(Название: "To Kill a Mockingbird", автор: "Harper Lee")
* book1(Название: "1984", автор: "George Orwell")
* book2(Название: "Brave New World", автор: "Aldous Huxley")

Класс `Member`: 
* member(Имя: "Alice")
* member1(Имя: "Kate")
* member2(Имя: "Bob")

| Название теста | Тип теста  | Входные данные                                                                                      | Ожидаемый результат                                                                             |
|---|------------|-----------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|
| `test_borrow_and_check_borrower` | Позитивный | Объект `book`, объект `member`                                                                      | Статус книги изменен на `False`, в списке книг пользователя добавлена книга                     |
| `test_return_and_check_borrower` | Позитивный | Объект `book`, объект `member`                                                                      | Статус книги изменен на `True`, книга удалена из списка книг пользователя                       |
| `test_borrow_deleted_book` | Негативный | Название книги: "1984", объект `member`                                                             | Книга "1984" удалена из библиотеки, уведомление о том, что книга недоступна                     |
| `test_return_unborrowed_book` | Негативный | Объект `book`, объект `member`                                                                      | Объекты не изменены, уведомление о том, что пользователь не брал эту книгу                      |
| `test_save_and_restore_with_active_loans` | Позитивный | Объект `book1`, объект `book2`, объект `member`, название файла для сохранения: "test_library.json" | Библиотека восстановлена из файла: все изменения, которые были сделаны до сохранения, загружены |
| `test_suggest_add_suggest_book` | Позитивный | Объект `book1`, новая книга: "To Kill a Mocking guy", запрос на поиск: "To Kill a Mocking"          | Количество возможных вариантов книги до добавления - 1, после - 2                         |

# Аттестационные тесты
**Класс `TestAttestation`**

Для тестов этого класса, в объект класса `Library` были помещены следующие объекты:

Класс `Book`:
* book(Название: "To Kill a Mockingbird", автор: "Harper Lee")
* book1(Название: "The War", автор: "Guy")
* book2(Название: "Wars", автор: "Guy")
* book3(Название: "WarStoke", автор: "Guy")
* book4(Название: "War Stakes", автор: "Guy")

Класс `Member`: 
* member(Имя: "Alice")
* member1(Имя: "Kate")
* member2(Имя: "Bob")

| Тест | Тип теста  | Входные данные                                                                                     | Ожидаемый результат                                                                                                                                                               |
|---|------------|----------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `test_full_workflow` | Позитивный | Имя нового пользователя, название и автор новой книги                                              | Добавлены: новый пользователь, новая книга. Пользователю выдана книга, книга возвращена пользователем                                                                             |
| `test_borrow_conflict` | Негативный | Объект `member1`, объект `member2`                                                                 | Книга `book`, взятая пользователем Kate, при попытки взять ее пользователем Bob остается у Kate                                                                                   |
| `test_user_find_book` | Позитивный | Запросы пользователя: "War", "WarSto", "WarStoke";<br/>объекты: `book1`, `book2`, `book3`, `book4` | Рекомендации после первого запроса: `book1`, `book2`, `book3`;<br/>Рекомендации после второго запроса: `book2`, `book3`, `book4`;<br/> Рекомендации после третьего запроса: `book3` |
